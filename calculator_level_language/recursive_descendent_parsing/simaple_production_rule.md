# 簡單的生成規則

作為使用 EBNF 描述文法的範例，考慮下面的生成規則：

```text
expr = num ("+" num | "-" num)*
```

`num`可以想成已經在其他的規則中被定義，是代表數值的符號的意思。在這個文法中，`expr`首先有一個`num`，隨後跟著0個以上的「`+`和`num`或`-`和`num`」。這個規則其實就是表達加減法算式的文法。

從`expr`開始展開，可以組合出任意的加減法的字串，舉例來說像`1`或`10+5`或`42-30+25`。底下為展開式：

{% code-tabs %}
{% code-tabs-item title="1" %}
```text
expr → num → "1"
```
{% endcode-tabs-item %}
{% endcode-tabs %}

{% code-tabs %}
{% code-tabs-item title="10+5" %}
```text
expr → num "+" num
     → "10" "+" "5"
```
{% endcode-tabs-item %}
{% endcode-tabs %}

{% code-tabs %}
{% code-tabs-item title="42-30+25" %}
```text
expr → num "-" num "+" num
     → "42" "-" "30" "+" "2"
```
{% endcode-tabs-item %}
{% endcode-tabs %}

這樣的展開順序不只可以用箭頭表達，也可以用樹來表示。上列算式的語法樹如以下所示：

![1&#x7684;&#x8A9E;&#x6CD5;&#x6A39;](../../.gitbook/assets/index%20%2814%29.svg)

![10+5&#x7684;&#x8A9E;&#x6CD5;&#x6A39;](../../.gitbook/assets/index%20%281%29.svg)

![42-20+2&#x7684;&#x8A9E;&#x6CD5;&#x6A39;](../../.gitbook/assets/index%20%2813%29.svg)

用樹結構來表示，就可以很清楚看出哪個非終端符號會展開成什麼樣子。

向上圖這樣和文法一一對應的語法樹也被稱為「具體語法樹」（concrete syntax tree）。這個說法在和抽象語法樹作對比的時候較常用到。

此外，上述的具體語法樹中，並沒有把加減法從左到右的規則表現在樹上。這類規則在此處說明的文法中，並不是以 EBNF 描述，而是在語言的規格書裡有加註「加減法必須從左到右計算」。分析器必須同時考慮 EBNF 和這些說明，讀進代表算式的標記列，妥當地建立能符合算式順序的抽象語法樹。

因此，在以上的文法中，EBNF 表現的具體語法樹和分析器所輸出的抽象語法樹其實看起來差滿多的。要定義出具體語法樹和抽象語法樹儘可能一致的文法不是不可能，但是該類文法會變得非常地冗長，會導致實作分析器時不知道該從何下手。上述的文法是在形式文法的嚴謹性，和以自然語言描述的易於理解上取得平衡，是一個較好上手的描述方式。

